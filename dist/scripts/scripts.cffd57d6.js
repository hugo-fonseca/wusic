"use strict";angular.module("wusicApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/list.html",controller:"FeedController",controllerAs:"feed"}).when("/music/:name",{templateUrl:"views/music.html",controller:"MusicController",controllerAs:"musicshow"}).otherwise({redirectTo:"/"})}]).filter("trusted",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]).directive("fallbackimg",function(){var a={link:function(a,b,c){b.bind("error",function(){angular.element(this).attr("src",c.fallbackimg)})}};return a}).directive("imgload",function(){return{restrict:"A",link:function(a,b,c){b.bind("load",function(){a.$apply(c.imgload)})}}});var shuffleArray=function(a){for(var b,c,d=a.length;d;)c=Math.floor(Math.random()*d--),b=a[d],a[d]=a[c],a[c]=b;return a};angular.module("wusicApp").factory("freeMusicService",["$http",function(a){var b="https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20json%20where%20url%20%3D'http%3A%2F%2Ffreemusicarchive.org%2Frecent.json'&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys",c=null;return{get:function(){return a.get(b,{cache:!0}).success(function(a,b){c=a.query.results.json.aTracks})},list:function(){return null!=c?shuffleArray(c):null},search:function(a){for(var b=0,d=c.length;d>b;b++)if(c[b].track_handle===a)return c[b];return!1}}}]),angular.module("wusicApp").factory("playerService",function(){var a={};return a.playing="",a.status=0,a.name="",a.id=null,a.playmp3=function(b){a.playing!=b.track_file_url&&(a.playing=b.track_file_url,a.name=b.track_title,a.id=b.track_id),a.status=1},a.pause=function(){a.status=0},a.playExe=function(b,c){$(".playing").removeClass("playing"),$(".pause-btn .pause").removeClass("show"),$(b.target).addClass("playing"),angular.element(b.target).parent().parent().addClass("playing"),angular.element(b.target).parent().addClass("playing"),angular.element(b.target).parent().children(".pause-btn").children(".pause").addClass("show"),a.playmp3(c)},a.pauseExe=function(b,c){$(b.target).removeClass("show"),angular.element(b.target).parent().parent().parent().removeClass("playing"),angular.element(b.target).parent().parent().removeClass("playing"),angular.element(b.target).parent().parent().children(".play").removeClass("playing"),a.pause()},a}),angular.module("wusicApp").controller("PlayerController",["$scope","$element","freeMusicService","playerService",function(a,b,c,d){a.mp3="",a.name="",a.artist="",a.duration="",a.$watch(function(){return d},function(c,d){var e=$(b).children("audio")[0];d.playing!=c.playing&&(a.mp3=c.playing,a.name=c.name,a.artist=c.artist,e.play()),c.status?e.play():e.pause()},!0)}]),angular.module("wusicApp").controller("FeedController",["$scope","$rootScope","freeMusicService","playerService",function(a,b,c,d){a.musics=null,a.playingId=d.id;var e=0;null===c.list()?c.get().then(function(){a.musics=c.list()}):a.musics=c.list(),a.countLoad=function(){e>=a.musics.length-1&&($(".loader").addClass("loaded"),e=0),e++},a.play=d.playExe,a.pause=d.pauseExe}]),angular.module("wusicApp").controller("MusicController",["$scope","$routeParams","freeMusicService","playerService",function(a,b,c,d){a.playingId=d.id,a.music={};var e=0;a.countLoad=function(){e++,e>=1&&($(".loader").addClass("loaded"),e=0)},null!=c.list()?a.music=c.search(b.name):c.get().then(function(){a.music=c.search(b.name)}),a.play=d.playExe,a.pause=d.pauseExe}]),angular.module("wusicApp").run(["$templateCache",function(a){a.put("views/list.html",'<div class="container"> <ul class="page music-list"> <li class="ui music-card col-xs-12 col-sm-4 col-md-3 col-lg-3" ng-repeat="music in musics"> <div class="out-img w100"> <img class="music-img" fallbackimg="images/noimg.e4782976.jpg" imgload="countLoad()" ng-src="{{ music.track_image_file }}" erralt="{{ music.track_title }}"> <div class="music-img-overlay" ng-class="music.track_id == playingId ? \'playing\' : \'\'"> <div class="play-container" ng-class="music.track_id == playingId ? \'playing\' : \'\'"> <span class="pause-btn" ng-click="pause($event)"> <span class="pause" ng-class="music.track_id == playingId ? \'show\' : \'\'"></span> </span> <span class="play" ng-class="music.track_id == playingId ? \'playing\' : \'\'" ng-click="play($event, music)"></span> </div> </div> </div> <div class="info"> <a href="#/music/{{ music.track_handle }}"> <h5 class="music-title">{{ music.track_title }}</h5> <p class="music-text"><small class="text-muted">{{ music.artist_name }}</small></p> </a> </div> </li> </ul> </div>'),a.put("views/music.html",'<div class="page music-page"> <div class="header-song" style="background-image:url({{ music.track_image_file }})"> <div class="overlay"></div> <div class="container clearfix"> <div class="ui music-card big"> <div class="out-img col-md-3"> <img class="music-img" imgload="countLoad()" fallbackimg="images/noimg.e4782976.jpg" ng-src="{{ music.track_image_file }}" alt="{{ music.track_title }}"> <div class="music-img-overlay" ng-class="music.track_id == playingId ? \'playing\' : \'\'"> <div class="play-container" ng-class="music.track_id == playingId ? \'playing\' : \'\'"> <span class="pause-btn" ng-click="pause($event)"> <span class="pause" ng-class="music.track_id == playingId ? \'show\' : \'\'"></span> </span> <span class="play" ng-class="music.track_id == playingId ? \'playing\' : \'\'" ng-click="play($event, music)"></span> </div> </div> </div> <div class="info col-md-7"> <h5 class="music-title">{{ music.track_title }}</h5> <p class="music-text"><small class="text-muted">{{ music.artist_name }}</small></p> </div> <div class="col-md-2 down"> <a class="btn" href="{{ music.track_file_url }}"><span class="glyphicon glyphicon-arrow-down"></span>Download</a> </div> </div> </div> </div> <div class="content-song"> <div class="container"> <div class="col-md-6"> <h2>Info</h2> <ul> <li><b>Duração:</b> {{music.track_duration}}</li> <li><b>Bitrate:</b> {{music.track_bit_rate}}</li> <li><b>Downlds:</b> {{music.downloads}}</li> </ul> </div> <div class="col-md-6"> <h2>Album</h2> <ul> <li><b>Nome:</b> {{music.album_title}}</li> <li><b>Licença:</b> {{music.license_title}}</li> </ul> </div> </div> </div> </div>')}]);